import{q as p,r as c,W as j,j as a,a as r,b as B}from"./app-e670688f.js";import{A as I}from"./AuthenticatedLayout-93bc0d30.js";import{d as P}from"./debounce-65d97537.js";import A from"./Pagination-98cba72d.js";import E from"./BookCard-88c0f688.js";import _ from"./BookCardBranch-d8ef3c5e.js";import"./AdminAuthenticatedHeader-c4958646.js";import"./ApplicationLogo-2e2a9495.js";import"./transition-ac14507e.js";import"./AuthenticatedLibraryHeader-47ef0f82.js";import"./DangerButton-6f97a6dd.js";import"./PrimaryButton-196d6691.js";/* empty css                      */import"./index-fdf5cff0.js";import"./react-toastify.esm-59ce4bfa.js";function U({auth:g,books:i,cities:o,districts:x,topSilingBooks:f}){const s=p().props.filters,n=p().props.currentPage,[v,y]=c.useState(""),{data:t,setData:d,get:w}=j({search:s.search,city:s.city,district:s.district}),b=()=>{w(route("search.books.index",{search:t.search,city:t.city,district:t.district,page:n}),{preserveScroll:!0,preserveState:!0,replace:!0})},l=c.useCallback(P(b,500),[t.search,t.city,t.district,n]);c.useEffect(()=>(l(),l.cancel),[t.search,t.city,t.district,l]);const N=e=>{var h,u;const k=e.target.value,m=o.filter(S=>k==S.name);y((h=m[0])==null?void 0:h.id),d("city",(u=m[0])==null?void 0:u.name)},C=e=>{d("district",e.target.value)};return a(I,{user:g.user,children:[r(B,{title:"البحث عن الكتب"}),a("div",{className:"py-2",children:[r("div",{className:"py-6",children:a("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r("h1",{className:"text-xl mb-2 font-semibold text-gray-600",children:"الكتب الأكثر طلبا"}),r("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:r("div",{className:"mx-auto grid grid-cols-1 sm:max-w-7xl  sm:grid-cols-1 p-6 gap-2 flex-wrap text-gray-900",children:f.map(e=>r("div",{className:"rounded-xl w-full shadow-lg border",children:r("div",{className:"flex w-full items-center justify-between bg-indigo-300 rounded-xl px-4",children:a("h1",{className:"p-2 w-full text-white text-xl whitespace-nowrap",children:[r("span",{className:"font-semibold",children:"أسم الكتاب :"})," ",e.book_name," "]})})},e.id))})})]})}),a("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[a("div",{className:"w-full sm:inline-flex ml-4 items-center gap-3 px-6 ",children:[r("input",{value:t.search||"",onChange:e=>d("search",e.target.value),type:"text",className:"w-full sm:max-w-xl  border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"إبحث بإسم الكتاب او المؤلف ..."}),r("div",{className:"mb-2",children:a("select",{onChange:N,value:t.city||"",name:"city",id:"city",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[r("option",{value:"",children:"أختر المدينة"}),o.map(e=>r("option",{value:e.name,children:e.name},e.id))]})}),r("div",{className:"mb-2",children:a("select",{onChange:C,value:t.district||"",name:"district",id:"district",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[r("option",{value:"",children:"أختر الحي"}),x.filter(e=>e.city_id===v).map(e=>r("option",{value:e.name,children:e.name},e.id))]})})]}),r("div",{className:"overflow-hidden sm:rounded-lg",children:a("div",{className:"p-6 text-gray-900",children:[a("div",{className:"container mx-auto grid grid-cols-1 sm:grid-cols-1  gap-4",children:[!i.data.length&&r("div",{children:r("h1",{className:"text-center sm:text-right text-lg sm:text-xl text-gray-900",children:"لا يوجد تطابق لبحثك، حاول مره اخرى!"})}),i.data.map(e=>e.library!==null?r(E,{book:e},e.id):r(_,{book:e},e.id))]}),r(A,{class:"mt-6",links:i.links})]})})]})]})]})}export{U as default};
