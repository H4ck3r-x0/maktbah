import{q as u,r as d,W as S,j as s,a as e,b as j}from"./app-4dcbcd01.js";import{P as A}from"./PrimaryButton-2a1d70c1.js";import{T as E}from"./TextInput-599c42a1.js";import{A as T}from"./AdminAuthenticatedLayout-cab5b9b9.js";import{d as q}from"./debounce-9ee49d3c.js";import B from"./Pagination-c07de29d.js";import"./AdminAuthenticatedHeader-7810a8a5.js";import"./ApplicationLogo-04acaaec.js";import"./transition-cfef33d3.js";function Q({auth:g,stationeries:l,cities:n,districts:x}){const a=u().props.filters,o=u().props.currentPage,[y,f]=d.useState(""),{data:r,setData:c,delete:D,get:N,processing:L,reset:v}=S({search:a.search,city:a.city,district:a.district,orders:a.orders}),w=t=>{c("search",t.target.value)},b=t=>{c("orders",t.target.value)},k=()=>{N(route("admin.stationery.index",{search:r.search,city:r.city,orders:r.orders,page:o}),{preserveScroll:!0,preserveState:!0,replace:!0})},i=d.useCallback(q(k,500),[r.search,r.city,r.district,r.orders,o]);d.useEffect(()=>(i(),i.cancel),[r.search,r.city,r.district,r.orders,i]);const C=t=>{var h,p;const I=t.target.value,m=n.filter(P=>I==P.name);f((h=m[0])==null?void 0:h.id),c("city",(p=m[0])==null?void 0:p.name)},_=t=>{c("district",t.target.value)};return s(T,{user:g.user,header:e("div",{className:"flex items-center justify-between",children:e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"جميع القرطاسيات"})}),children:[e(j,{title:"جميع القرطاسيات"}),e("div",{className:"",children:s("div",{className:"max-w-7xl mx-auto sm:px-2 lg:px-8",children:[e("div",{className:"py-3",children:s("div",{className:"flex items-center gap-4",children:[e(E,{type:"text",id:"search",name:"search",value:r.search?r.search:"",autoComplete:"search",onChange:w,placeholder:"أبحث بإسم القرطاسية او صاحبها"}),e("div",{className:"mb-2",children:s("select",{onChange:C,value:r.city,name:"city",id:"city",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e("option",{value:"",children:"أختر المدينة"}),n.map(t=>e("option",{value:t.name,children:t.name},t.id))]})}),e("div",{className:"mb-2",children:s("select",{onChange:_,value:r.district,name:"district",id:"district",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e("option",{value:"",children:"أختر الحي"}),x.filter(t=>t.city_id===y).map(t=>e("option",{value:t.name,children:t.name},t.id))]})}),e("div",{className:"mb-2",children:s("select",{onChange:b,name:"district",id:"district",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e("option",{value:"",children:"المبيعات"}),e("option",{value:"highest",children:"الأعلى"}),e("option",{value:"lowest",children:"الأقل"})]})}),r.search!==""||r.account_type!==""?e(A,{onClick:()=>v(),children:"إعادة تعيين"}):null]})}),e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e("div",{className:"p-6 text-gray-900",children:s("div",{className:"relative overflow-x-auto",children:[s("table",{className:"w-full text-sm text-right text-gray-500 border",children:[e("thead",{className:"text-sm text-gray-700 uppercase bg-gray-100 rounded-md border",children:s("tr",{children:[e("th",{scope:"col",className:"px-2 py-3",children:"#"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"أسم المكتبة"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"المبيعات"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"المدينة"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"الحي"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"صاحب المكتبة"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"رقم التواصل"})]})}),e("tbody",{children:l.data.map(t=>s("tr",{className:"bg-white border-b hover:bg-gray-100 hover:transition-all",children:[e("th",{scope:"row",className:"px-2 py-4 font-medium text-gray-900 ",children:t.id}),e("td",{className:"px-2 py-4",children:t.name}),e("td",{className:"px-2 py-4 w-fit",children:t.orders_sum_total_payment?s("span",{className:"text-green-500 text-sm  font-semibold",children:[t.orders_sum_total_payment," ريال"]}):"لايوجد"}),e("td",{className:"px-2 py-4",children:t.city}),e("td",{className:"px-2 py-4",children:t.district}),e("td",{className:"px-2 py-4",children:t.user.username}),e("td",{className:"px-2 py-4",children:t.phone})]},t.id))})]}),e(B,{class:"mt-6",links:l.links})]})})})]})})]})}export{Q as default};
