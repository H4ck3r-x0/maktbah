import{q as _,W as k,r as p,j as t,a as s,b as C,d as D,g as h}from"./app-9c5a79ba.js";import{D as j}from"./DangerButton-df1c3d4a.js";import{P as u}from"./PrimaryButton-1e9222b3.js";import{S as M}from"./SecondaryButton-e5c9bb09.js";import{A as O}from"./AuthenticatedLayout-d2816446.js";import{m as Y}from"./moment-with-locales-b4e200c1.js";import{d as B}from"./debounce-cab5326b.js";import"./AdminAuthenticatedHeader-64d8fefa.js";import"./ApplicationLogo-534a4b7d.js";import"./transition-db013f4b.js";import"./AuthenticatedLibraryHeader-d500b1ad.js";function H({auth:x,orders:f,STATUS:o}){const n=_().props.filters,{data:r,setData:i,get:g,reset:y}=k({search:n.search,status:n.status}),b=()=>{g(route("user.order.index",{search:r.search,status:r.status}),{preserveScroll:!0,preserveState:!0,replace:!0})},c=p.useCallback(B(b,500),[r.search,r.status]);p.useEffect(()=>(c(),c.cancel),[r.search,r.status,c]);const N=e=>{i("status",e.target.value)},w=(e,a)=>{e.preventDefault(),h.post(route("user.order.cancel",a))},v=(e,a)=>{e.preventDefault(),h.post(route("user.order.restore",a))};return t(O,{user:x.user,header:s("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"الطلبات"}),children:[s(C,{title:"الطلبات"}),s("div",{className:"py-6",children:t("div",{className:"w-full items-center gap-3 px-2",children:[t("div",{className:"w-full flex flex-col sm:flex-row ml-4  gap-3 pb-4 ",children:[s("input",{value:r.search||"",onChange:e=>i("search",e.target.value),type:"text",className:"w-full sm:max-w-xl md:max-w-sm border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"إبحث برقم الطلب ، اسم المكتبة"}),t("select",{onChange:N,className:"block  border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[s("option",{value:"",children:"إختر حالة الطلب"}),Object.keys(o).map((e,a)=>s("option",{value:e,children:o[e].message.ar},a))]}),s(u,{onClick:()=>y(),children:"إعادة تعيين"})]}),s("div",{className:"relative overflow-x-auto",children:t("table",{className:"w-full text-xs sm:text-lg text-right text-gray-500 shadow border",children:[s("thead",{className:"text-xs sm:text-lg text-gray-700  border ",children:t("tr",{children:[s("th",{scope:"col",className:"px-2 py-3",children:"رقم الطلب"}),s("th",{scope:"col",className:"px-2 py-3",children:"المكتبة"}),s("th",{scope:"col",className:"px-2 py-3",children:"حالة الطلب"}),s("th",{scope:"col",className:"px-2 py-3",children:"إجمالي الطلب"}),s("th",{scope:"col",className:"px-2 py-3",children:"تاريخ الانشاء"}),s("th",{scope:"col",className:"px-2 py-3",children:"العمليات"})]})}),s("tbody",{children:f.map(e=>{var a,d,m;return t("tr",{className:"bg-white ",children:[s("th",{scope:"row",className:"px-2 py-4   whitespace-nowrap ",children:e.id}),s("th",{scope:"row",className:"px-2 py-4  whitespace-nowrap ",children:(a=e.details[0])!=null&&a.book.library?(d=e.details[0])==null?void 0:d.book.library.name:(m=e.details[0])==null?void 0:m.book.branch.name}),s("td",{className:"px-2 py-4",style:{color:`${e.current_status&&e.model_status[e.current_status].color}`},children:e.model_status[e.current_status].message.ar}),t("td",{className:"px-2 py-4",children:[e.total_payment," ريال"]}),s("td",{className:"px-2 py-4",children:Y(e.created_at).locale("ar").format("MMMM Do YYYY")}),t("td",{className:"flex items-center gap-2 px-2 py-4",children:[s(D,{href:route("user.order.show",e.id),children:s(u,{className:"text-xs sm:text-sm",children:"التفاصيل"})}),e.current_status==="canceled_by_user"?s(M,{className:"text-xs sm:text-sm",onClick:l=>v(l,e.id),children:"إستعادة الطلب"}):e.current_status!=="confirmed"&&e.current_status!=="canceled_by_library"&&s(j,{className:"text-xs sm:text-sm",onClick:l=>w(l,e.id),children:"إلغاء الطلب"})]})]},e.id)})})]})})]})})]})}export{H as default};
