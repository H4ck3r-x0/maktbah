import{q as p,W as v,r as i,j as t,a,b as k,d as C,f as l}from"./app-cb4316c3.js";import{P as o}from"./PrimaryButton-da87da90.js";import{A as D}from"./AuthenticatedLayout-f050c8ea.js";import{d as S}from"./debounce-e91e51ba.js";import{T as B}from"./TextInput-9b2540c0.js";import{S as h}from"./SecondaryButton-906b8e0d.js";import{D as P}from"./DangerButton-4c28199a.js";import"./AdminAuthenticatedHeader-c96ceacd.js";import"./ApplicationLogo-d330570c.js";import"./transition-3e9f14fd.js";import"./AuthenticatedLibraryHeader-94a27a78.js";function G({auth:m,orders:d}){const u=p().props.filters,x=p().props.currentPage,{data:c,setData:n,get:w,processing:y}=v({search:u.search}),N=e=>{n("search",e.target.value)},f=()=>{w(route("library.order.index",{search:c.search,page:x}),{preserveScroll:!0,preserveState:!0,replace:!0})},r=i.useCallback(S(f,500),[c.search]);i.useEffect(()=>(r(),r.cancel),[c.search,r]);const g=(e,s)=>{e.preventDefault(),l.post(route("library.order.cancel",s))},b=(e,s)=>{e.preventDefault(),l.post(route("library.order.restore",s))},_=(e,s)=>{e.preventDefault(),l.post(route("library.order.confirm",s))};return t(D,{user:m.user,header:a("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"الطلبات"}),children:[a(k,{title:"الطلبات"}),a("div",{className:"py-6",children:t("div",{className:"w-full items-center gap-3 px-6",children:[a("div",{className:"pb-3",children:t("div",{className:"flex items-center gap-4",children:[a(B,{type:"text",id:"search",name:"search",className:" w-80",value:c.search?c.search:"",autoComplete:"search",onChange:N,placeholder:"رقم الطلب،  صاحب الطلب"}),a("div",{className:" hidden sm:block",children:c.search!==""?a(o,{onClick:()=>n("search",""),children:"إعادة تعيين"}):null})]})}),a("div",{className:"relative overflow-x-auto",children:t("table",{className:"w-full text-xs sm:text-lg text-right text-gray-500 shadow border",children:[a("thead",{className:"text-xs sm:text-lg text-gray-700  border ",children:t("tr",{children:[a("th",{scope:"col",className:"w-20 px-6 py-3 whitespace-nowrap",children:"رقم الطلب"}),a("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"صاحب الطلب"}),a("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"حالة الطلب"}),a("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"إجمالي الطلب"}),a("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"رسوم الخدمة"}),a("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"الصافي"}),a("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap ",children:"العمليات"})]})}),a("tbody",{className:`${y?"opacity-50":""}`,children:d.map(e=>t("tr",{className:"bg-white ",children:[a("th",{scope:"row",className:"px-6 py-4 text-gray-900 whitespace-nowrap",children:e.id}),a("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap",children:e.user.username}),a("td",{className:"px-6 py-4 whitespace-nowrap",style:{color:`${e.current_status&&e.model_status[e.current_status].color}`},children:e.model_status[e.current_status].message.ar}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.total_payment," ريال"]}),a("td",{className:"px-6 py-4 whitespace-nowrap",children:"4%"}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.total," ريال"]}),t("td",{className:"flex items-center gap-2 px-3 py-4 w-full",children:[a(C,{href:route("library.order.show",e.id),children:a(o,{className:"text-xs sm:text-sm",children:"التفاصيل"})}),e.current_status==="canceled_by_library"?e.current_status!=="canceled_by_user"&&a(h,{className:"text-xs sm:text-sm whitespace-nowrap",onClick:s=>b(s,e.id),children:"إستعادة الطلب"}):t("div",{className:"flex items-center gap-2 w-full",children:[e.current_status!=="confirmed"&&e.current_status!=="canceled_by_user"&&a(h,{className:"text-xs sm:text-sm whitespace-nowrap",onClick:s=>_(s,e.id),children:"تأكيد الطلب"}),e.current_status!=="canceled_by_user"&&a(P,{className:"text-xs sm:text-sm whitespace-nowrap",onClick:s=>g(s,e.id),children:"إلغاء الطلب"})]})]})]},e.id))})]})})]})})]})}export{G as default};
