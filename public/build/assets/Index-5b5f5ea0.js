import{q as x,r as d,W as M,j as a,a as e,d as f,b as P}from"./app-e670688f.js";import{D as W}from"./DangerButton-6f97a6dd.js";import{P as n}from"./PrimaryButton-196d6691.js";import{S as z}from"./SecondaryButton-8e39c41a.js";import{T as H}from"./TextInput-3ce37cfb.js";import{A as E}from"./AdminAuthenticatedLayout-ce6af06a.js";import{d as T}from"./debounce-65d97537.js";import q from"./Pagination-98cba72d.js";import"./AdminAuthenticatedHeader-c4958646.js";import"./ApplicationLogo-2e2a9495.js";import"./transition-ac14507e.js";function Z({auth:y,libraries:o,cities:l,districts:v}){const s=x().props.filters,m=x().props.currentPage,[w,N]=d.useState(""),{data:t,setData:c,delete:k,get:b,processing:C,reset:L}=M({search:s.search,city:s.city,district:s.district,orders:s.orders}),_=r=>{c("search",r.target.value)},j=r=>{c("orders",r.target.value)},S=r=>{window.confirm("هل انت متاكد من حذف المكتبة، ستخسر جميع البيانات")===!0&&k(route("admin.library.destroy",r))},A=()=>{b(route("admin.library.index",{search:t.search,city:t.city,orders:t.orders,page:m}),{preserveScroll:!0,preserveState:!0,replace:!0})},i=d.useCallback(T(A,500),[t.search,t.city,t.district,t.orders,m]);d.useEffect(()=>(i(),i.cancel),[t.search,t.city,t.district,t.orders,i]);const B=r=>{var u,g;const h=r.target.value,p=l.filter(I=>h==I.name);N((u=p[0])==null?void 0:u.id),c("city",(g=p[0])==null?void 0:g.name)},D=r=>{c("district",r.target.value)};return a(E,{user:y.user,header:a("div",{className:"flex items-center justify-between",children:[e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"جميع المكتبات"}),e(f,{href:route("admin.library.create"),children:e(n,{children:"إضافة مكتبة"})})]}),children:[e(P,{title:"جميع المكتبات"}),e("div",{className:"",children:a("div",{className:"max-w-7xl mx-auto sm:px-2 lg:px-8",children:[e("div",{className:"py-3",children:a("div",{className:"flex items-center gap-4",children:[e(H,{type:"text",id:"search",name:"search",value:t.search?t.search:"",autoComplete:"search",onChange:_,placeholder:"أبحث بإسم المكتبة او صاحبها"}),e("div",{className:"mb-2",children:a("select",{onChange:B,value:t.city,name:"city",id:"city",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e("option",{value:"",children:"أختر المدينة"}),l.map(r=>e("option",{value:r.name,children:r.name},r.id))]})}),e("div",{className:"mb-2",children:a("select",{onChange:D,value:t.district,name:"district",id:"district",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e("option",{value:"",children:"أختر الحي"}),v.filter(r=>r.city_id===w).map(r=>e("option",{value:r.name,children:r.name},r.id))]})}),e("div",{className:"mb-2",children:a("select",{onChange:j,name:"district",id:"district",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e("option",{value:"",children:"المبيعات"}),e("option",{value:"highest",children:"الأعلى"}),e("option",{value:"lowest",children:"الأقل"})]})}),t.search!==""||t.account_type!==""?e(n,{onClick:()=>L(),children:"إعادة تعيين"}):null]})}),e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e("div",{className:"p-6 text-gray-900",children:a("div",{className:"relative overflow-x-auto",children:[a("table",{className:"w-full text-sm text-right text-gray-500 border",children:[e("thead",{className:"text-sm text-gray-700 uppercase bg-gray-100 rounded-md border",children:a("tr",{children:[e("th",{scope:"col",className:"px-2 py-3",children:"#"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"أسم المكتبة"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"المبيعات"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"المدينة"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"الحي"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"صاحب المكتبة"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"رقم التواصل"}),e("th",{scope:"col",className:"px-2 py-3 tracking-wider",children:"العمليات"})]})}),e("tbody",{children:o.data.map(r=>a("tr",{className:"bg-white border-b hover:bg-gray-100 hover:transition-all",children:[e("th",{scope:"row",className:"px-2 py-4 font-medium text-gray-900 ",children:r.id}),e("td",{className:"px-2 py-4",children:r.name}),e("td",{className:"px-2 py-4 w-fit",children:r.orders_sum_total_payment?a("span",{className:"text-green-500 text-sm  font-semibold",children:[r.orders_sum_total_payment," ريال"]}):"لايوجد"}),e("td",{className:"px-2 py-4",children:r.city}),e("td",{className:"px-2 py-4",children:r.district}),e("td",{className:"px-2 py-4",children:r.user.username}),e("td",{className:"px-2 py-4",children:r.phone}),e("td",{className:"px-0 py-4",id:"here",children:a("div",{className:"flex items-center gap-2",children:[e(f,{href:route("admin.library.edit",r.id),children:e(n,{children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})})}),e(W,{onClick:()=>S(r.id),disabled:C,children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),e("a",{href:r.google_maps,target:"blank",children:e(z,{children:a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]})})})]})})]},r.id))})]}),e(q,{class:"mt-6",links:o.links})]})})})]})})]})}export{Z as default};
