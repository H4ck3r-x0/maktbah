import{q as f,r as n,W as P,j as a,a as r,b as _}from"./app-994d5e75.js";import{A as E}from"./AuthenticatedLayout-8ad92384.js";import{d as I}from"./debounce-a76aab47.js";import q from"./Pagination-9296f873.js";import A from"./BookCard-22ea00f4.js";import D from"./BookCardBranch-f3e0eb7b.js";import"./AdminAuthenticatedHeader-ddcb393a.js";import"./ApplicationLogo-73246aff.js";import"./transition-3ddd626e.js";import"./AuthenticatedLibraryHeader-3cd8df76.js";import"./DangerButton-372951b9.js";import"./PrimaryButton-2416f9ed.js";/* empty css                      */import"./index-a02a0850.js";import"./react-toastify.esm-5085ddd3.js";function X({auth:m,books:l,cities:u,districts:v,topSilingBooks:y,adminAdImage:h}){const d=f().props.filters,p=f().props.currentPage,[w,b]=n.useState(""),{data:i,setData:c,get:N,reset:C}=P({search:d.search,city:d.city,district:d.district}),k=()=>{N(route("search.books.index",{search:i.search,city:i.city,district:i.district,page:p}),{preserveScroll:!0,preserveState:!0,replace:!0})},o=n.useCallback(I(k,500),[i.search,i.city,i.district,p]);n.useEffect(()=>(o(),o.cancel),[i.search,i.city,i.district,o]);const j=e=>{var g,x;const s=e.target.value,t=u.filter(B=>s==B.name);b((g=t[0])==null?void 0:g.id),c("city",(x=t[0])==null?void 0:x.name)},S=e=>{c("district",e.target.value)};return a(E,{user:m.user,children:[r(_,{title:"البحث عن الكتب"}),a("div",{className:"py-2",children:[h&&r("div",{className:"flex items-center justify-center px-4  py-4",children:r("img",{src:h,className:"w-[1000px] h-[250px] shadow-lg rounded-lg",alt:""})}),a("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[a("div",{className:"w-full mx-auto sm:inline-flex ml-4 justify-center items-center gap-3 px-6 ",children:[r("input",{value:i.search||"",onChange:e=>{c("search",e.target.value),e.target.value===""&&C()},type:"text",className:"w-full sm:max-w-xl md:max-w-sm border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"إبحث بإسم الكتاب او المؤلف ..."}),r("div",{className:"mb-2",children:a("select",{onChange:j,value:i.city||"",name:"city",id:"city",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[r("option",{value:"",children:"أختر المدينة"}),u.map(e=>r("option",{value:e.name,children:e.name},e.id))]})}),r("div",{className:"mb-2",children:a("select",{onChange:S,value:i.district||"",name:"district",id:"district",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[r("option",{value:"",children:"أختر الحي"}),v.filter(e=>e.city_id===w).map(e=>r("option",{value:e.name,children:e.name},e.id))]})})]}),r("div",{className:"overflow-hidden sm:rounded-lg",children:a("div",{className:"p-6 text-gray-900",children:[a("div",{className:"container mx-auto grid grid-cols-1 sm:grid-cols-1  gap-4",children:[!l.data.length&&r("div",{className:"py-6",children:a("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r("h1",{className:"text-xl mb-2 font-semibold text-gray-600",children:"الكتب الأكثر طلبا"}),r("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:r("div",{className:"mx-auto grid grid-cols-1 sm:max-w-7xl  sm:grid-cols-1 p-6 gap-2 flex-wrap text-gray-900",children:y.map(e=>r("div",{className:"rounded-xl w-full shadow-lg border",children:r("div",{className:"flex w-full items-center justify-between bg-indigo-300 rounded-xl px-4",children:a("h1",{className:"p-2 w-full text-white text-xl whitespace-nowrap",children:[r("span",{className:"font-semibold",children:"أسم الكتاب :"})," ",e.book_name," "]})})},e.id))})})]})}),l.data.map(e=>{var s,t;return r("div",{children:e.library!==null?r(A,{book:e}):r(D,{book:e,userUnivirsty:(t=(s=m.user)==null?void 0:s.user_profile)==null?void 0:t.university})},e.id)})]}),r(q,{class:"mt-6",links:l.links})]})})]})]})]})}export{X as default};
