import{q as p,W as v,r as i,j as s,a as t,b as C,d as k,g as l}from"./app-994d5e75.js";import{P as o}from"./PrimaryButton-2416f9ed.js";import{A as D}from"./AuthenticatedLayout-8ad92384.js";import{d as S}from"./debounce-a76aab47.js";import{T as B}from"./TextInput-118ae39a.js";import{S as h}from"./SecondaryButton-2f9f9b52.js";import{D as P}from"./DangerButton-372951b9.js";import"./AdminAuthenticatedHeader-ddcb393a.js";import"./ApplicationLogo-73246aff.js";import"./transition-3ddd626e.js";import"./AuthenticatedLibraryHeader-3cd8df76.js";function G({auth:m,orders:d}){const u=p().props.filters,x=p().props.currentPage,{data:c,setData:n,get:w,processing:y}=v({search:u.search}),f=e=>{n("search",e.target.value)},N=()=>{w(route("branch.order.index",{search:c.search,page:x}),{preserveScroll:!0,preserveState:!0,replace:!0})},r=i.useCallback(S(N,500),[c.search]);i.useEffect(()=>(r(),r.cancel),[c.search,r]);const g=(e,a)=>{e.preventDefault(),l.post(route("branch.order.cancel",a))},b=(e,a)=>{e.preventDefault(),l.post(route("branch.order.restore",a))},_=(e,a)=>{e.preventDefault(),l.post(route("branch.order.confirm",a))};return s(D,{user:m.user,header:t("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"الطلبات"}),children:[t(C,{title:"الطلبات"}),t("div",{className:"py-6",children:s("div",{className:"w-full items-center gap-3 px-6",children:[t("div",{className:"pb-3",children:s("div",{className:"flex items-center gap-4",children:[t(B,{type:"text",id:"search",name:"search",className:" w-80",value:c.search?c.search:"",autoComplete:"search",onChange:f,placeholder:"رقم الطلب،  صاحب الطلب"}),c.search!==""?t(o,{onClick:()=>n("search",""),children:"إعادة تعيين"}):null]})}),t("div",{className:"relative overflow-x-auto",children:s("table",{className:"w-full text-xs sm:text-lg text-right text-gray-500 shadow border",children:[t("thead",{className:"text-xs sm:text-lg text-gray-700  border ",children:s("tr",{children:[t("th",{scope:"col",className:"w-20 px-6 py-3 whitespace-nowrap",children:"رقم الطلب"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"صاحب الطلب"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"حالة الطلب"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"إجمالي الطلب"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"رسوم الخدمة"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"الصافي"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"العمليات"})]})}),t("tbody",{className:`${y?"opacity-50":""}`,children:d.map(e=>s("tr",{className:"bg-white ",children:[t("th",{scope:"row",className:"px-6 py-4  text-gray-900 whitespace-nowrap ",children:e.id}),t("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap",children:e.user.username}),t("td",{className:"px-6 py-4 whitespace-nowrap",style:{color:`${e.current_status&&e.model_status[e.current_status].color}`},children:e.model_status[e.current_status].message.ar}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.total_payment," ريال"]}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:"4%"}),s("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.total," ريال"]}),s("td",{className:"flex items-center gap-2 px-3 py-4 w-full",children:[t(k,{href:route("library.order.show",e.id),children:t(o,{className:"text-xs sm:text-sm",children:"التفاصيل"})}),e.current_status==="canceled_by_library"?e.current_status!=="canceled_by_user"&&t(h,{className:"text-xs sm:text-sm whitespace-nowrap",onClick:a=>b(a,e.id),children:"إستعادة الطلب"}):s("div",{className:"flex items-center gap-2 w-full",children:[e.current_status!=="confirmed"&&e.current_status!=="canceled_by_user"&&t(h,{className:"text-xs sm:text-sm whitespace-nowrap",onClick:a=>_(a,e.id),children:"تأكيد الطلب"}),e.current_status!=="canceled_by_user"&&e.current_status!=="confirmed"&&t(P,{className:"text-xs sm:text-sm whitespace-nowrap",onClick:a=>g(a,e.id),children:"إلغاء الطلب"})]})]})]},e.id))})]})})]})})]})}export{G as default};
