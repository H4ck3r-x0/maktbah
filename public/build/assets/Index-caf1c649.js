import{q as p,W as v,r as i,j as a,a as t,b as k,d as C,f as l}from"./app-8bd1617c.js";import{P as o}from"./PrimaryButton-33dfd502.js";import{A as D}from"./AuthenticatedLayout-f4c2a92f.js";import{d as S}from"./debounce-8a0975c2.js";import{T as B}from"./TextInput-41681d3c.js";import{S as h}from"./SecondaryButton-2ef18ad9.js";import{D as P}from"./DangerButton-557cde5d.js";import"./AdminAuthenticatedHeader-18f6e980.js";import"./ApplicationLogo-c9d93069.js";import"./transition-5b47336d.js";import"./AuthenticatedLibraryHeader-8a6ca43f.js";function G({auth:m,orders:d}){const u=p().props.filters,x=p().props.currentPage,{data:c,setData:n,get:w,processing:y}=v({search:u.search}),f=e=>{n("search",e.target.value)},N=()=>{w(route("library.order.index",{search:c.search,page:x}),{preserveScroll:!0,preserveState:!0,replace:!0})},r=i.useCallback(S(N,500),[c.search]);i.useEffect(()=>(r(),r.cancel),[c.search,r]);const g=(e,s)=>{e.preventDefault(),l.post(route("library.order.cancel",s))},b=(e,s)=>{e.preventDefault(),l.post(route("library.order.restore",s))},_=(e,s)=>{e.preventDefault(),l.post(route("library.order.confirm",s))};return a(D,{user:m.user,header:t("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"الطلبات"}),children:[t(k,{title:"الطلبات"}),t("div",{className:"py-6",children:a("div",{className:"w-full items-center gap-3 px-6",children:[t("div",{className:"pb-3",children:a("div",{className:"flex items-center gap-4",children:[t(B,{type:"text",id:"search",name:"search",className:" w-80",value:c.search?c.search:"",autoComplete:"search",onChange:f,placeholder:"رقم الطلب،  صاحب الطلب"}),t("div",{className:" hidden sm:block",children:c.search!==""?t(o,{onClick:()=>n("search",""),children:"إعادة تعيين"}):null})]})}),t("div",{className:"relative overflow-x-auto",children:a("table",{className:"w-full text-xs sm:text-lg text-right text-gray-500 shadow border",children:[t("thead",{className:"text-xs sm:text-lg text-gray-700  border ",children:a("tr",{children:[t("th",{scope:"col",className:"w-20 px-6 py-3 whitespace-nowrap",children:"رقم الطلب"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"صاحب الطلب"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"حالة الطلب"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"إجمالي الطلب"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"رسوم الخدمة"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap",children:"الصافي"}),t("th",{scope:"col",className:"px-6 py-3 whitespace-nowrap ",children:"العمليات"})]})}),t("tbody",{className:`${y?"opacity-50":""}`,children:d.map(e=>a("tr",{className:"bg-white ",children:[t("th",{scope:"row",className:"px-6 py-4 text-gray-900 whitespace-nowrap",children:e.id}),t("th",{scope:"row",className:"px-6 py-4 whitespace-nowrap",children:e.user.username}),t("td",{className:"px-6 py-4 whitespace-nowrap",style:{color:`${e.current_status&&e.model_status[e.current_status].color}`},children:e.model_status[e.current_status].message.ar}),a("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.total_payment," ريال"]}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:"4%"}),a("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.total," ريال"]}),a("td",{className:"flex items-center gap-2 px-3 py-4 w-full",children:[t(C,{href:route("library.order.show",e.id),children:t(o,{className:"text-xs sm:text-sm",children:"التفاصيل"})}),e.current_status==="canceled_by_library"?e.current_status!=="canceled_by_user"&&t(h,{className:"text-xs sm:text-sm whitespace-nowrap",onClick:s=>b(s,e.id),children:"إستعادة الطلب"}):a("div",{className:"flex items-center gap-2 w-full",children:[e.current_status!=="confirmed"&&e.current_status!=="canceled_by_user"&&t(h,{className:"text-xs sm:text-sm whitespace-nowrap",onClick:s=>_(s,e.id),children:"تأكيد الطلب"}),e.current_status!=="canceled_by_user"&&e.current_status!=="confirmed"&&t(P,{className:"text-xs sm:text-sm whitespace-nowrap",onClick:s=>g(s,e.id),children:"إلغاء الطلب"})]})]})]},e.id))})]})})]})})]})}export{G as default};
