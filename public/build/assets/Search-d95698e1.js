import{q as g,r as c,W as B,j as i,a as r,b as P}from"./app-7355fa36.js";import{A as E}from"./AuthenticatedLayout-510cd8a3.js";import{d as I}from"./debounce-b63c2ecd.js";import _ from"./Pagination-8e050b14.js";import q from"./BookCard-68fb56d2.js";import A from"./BookCardBranch-3340a533.js";import"./AdminAuthenticatedHeader-4195689c.js";import"./ApplicationLogo-50054e7e.js";import"./transition-1802807a.js";import"./AuthenticatedLibraryHeader-8212a420.js";import"./DangerButton-795cc9cb.js";import"./PrimaryButton-d324a9fe.js";/* empty css                      */import"./index-926f2809.js";import"./react-toastify.esm-503b6fd2.js";function V({auth:x,books:t,cities:o,districts:f,topSilingBooks:v,adminAdImage:n}){const s=g().props.filters,m=g().props.currentPage,[y,w]=c.useState(""),{data:a,setData:l,get:b}=B({search:s.search,city:s.city,district:s.district}),N=()=>{b(route("search.books.index",{search:a.search,city:a.city,district:a.district,page:m}),{preserveScroll:!0,preserveState:!0,replace:!0})},d=c.useCallback(I(N,500),[a.search,a.city,a.district,m]);c.useEffect(()=>(d(),d.cancel),[a.search,a.city,a.district,d]);const C=e=>{var h,p;const j=e.target.value,u=o.filter(S=>j==S.name);w((h=u[0])==null?void 0:h.id),l("city",(p=u[0])==null?void 0:p.name)},k=e=>{l("district",e.target.value)};return i(E,{user:x.user,children:[r(P,{title:"البحث عن الكتب"}),i("div",{className:"py-2",children:[n&&r("div",{className:"flex items-center justify-center px-4  py-4",children:r("img",{src:n,className:"w-[1000px] h-[250px] shadow-lg rounded-lg",alt:""})}),i("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[i("div",{className:"w-full mx-auto sm:inline-flex ml-4 justify-center items-center gap-3 px-6 ",children:[r("input",{value:a.search||"",onChange:e=>l("search",e.target.value),type:"text",className:"w-full sm:max-w-xl md:max-w-sm border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"إبحث بإسم الكتاب او المؤلف ..."}),r("div",{className:"mb-2",children:i("select",{onChange:C,value:a.city||"",name:"city",id:"city",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[r("option",{value:"",children:"أختر المدينة"}),o.map(e=>r("option",{value:e.name,children:e.name},e.id))]})}),r("div",{className:"mb-2",children:i("select",{onChange:k,value:a.district||"",name:"district",id:"district",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[r("option",{value:"",children:"أختر الحي"}),f.filter(e=>e.city_id===y).map(e=>r("option",{value:e.name,children:e.name},e.id))]})})]}),r("div",{className:"overflow-hidden sm:rounded-lg",children:i("div",{className:"p-6 text-gray-900",children:[i("div",{className:"container mx-auto grid grid-cols-1 sm:grid-cols-1  gap-4",children:[!t.data.length&&r("div",{className:"py-6",children:i("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r("h1",{className:"text-xl mb-2 font-semibold text-gray-600",children:"الكتب الأكثر طلبا"}),r("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:r("div",{className:"mx-auto grid grid-cols-1 sm:max-w-7xl  sm:grid-cols-1 p-6 gap-2 flex-wrap text-gray-900",children:v.map(e=>r("div",{className:"rounded-xl w-full shadow-lg border",children:r("div",{className:"flex w-full items-center justify-between bg-indigo-300 rounded-xl px-4",children:i("h1",{className:"p-2 w-full text-white text-xl whitespace-nowrap",children:[r("span",{className:"font-semibold",children:"أسم الكتاب :"})," ",e.book_name," "]})})},e.id))})})]})}),t.data.map(e=>e.library!==null?r(q,{book:e},e.id):r(A,{book:e},e.id))]}),r(_,{class:"mt-6",links:t.links})]})})]})]})]})}export{V as default};
