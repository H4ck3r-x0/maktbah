import{q as p,r as o,W as S,j as a,a as r,b as B}from"./app-0f417571.js";import{A as j}from"./AuthenticatedLayout-1a784295.js";import{d as I}from"./debounce-3ca2983e.js";import P from"./Pagination-d6d83c19.js";import A from"./BookCard-525b861a.js";import E from"./BookCardBranch-a83be856.js";import"./AdminAuthenticatedHeader-0ef8a0d5.js";import"./ApplicationLogo-d09776dc.js";import"./transition-4b5c5b4e.js";import"./AuthenticatedLibraryHeader-2897ad78.js";import"./DangerButton-3361b068.js";import"./PrimaryButton-db8d02aa.js";import"./custom-toast-27bff8d5.js";function Q({auth:g,books:i,cities:l,districts:f}){const s=p().props.filters,n=p().props.currentPage,[x,v]=o.useState(""),{data:t,setData:c,get:y}=S({search:s.search,city:s.city,district:s.district}),b=()=>{y(route("search.books.index",{search:t.search,city:t.city,district:t.district,page:n}),{preserveScroll:!0,preserveState:!0,replace:!0})},d=o.useCallback(I(b,500),[t.search,t.city,t.district,n]);o.useEffect(()=>(d(),d.cancel),[t.search,t.city,t.district,d]);const N=e=>{var u,h;const w=e.target.value,m=l.filter(k=>w==k.name);v((u=m[0])==null?void 0:u.id),c("city",(h=m[0])==null?void 0:h.name)},C=e=>{c("district",e.target.value)};return a(j,{user:g.user,children:[r(B,{title:"البحث عن الكتب"}),r("div",{className:"py-2",children:a("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[a("div",{className:"w-full sm:inline-flex ml-4 items-center gap-3 px-6 ",children:[r("input",{value:t.search||"",onChange:e=>c("search",e.target.value),type:"text",className:"w-full sm:max-w-xl  border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",placeholder:"إبحث بإسم الكتاب او المؤلف ..."}),r("div",{className:"mb-2",children:a("select",{onChange:N,value:t.city||"",name:"city",id:"city",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[r("option",{value:"",children:"أختر المدينة"}),l.map(e=>r("option",{value:e.name,children:e.name},e.id))]})}),r("div",{className:"mb-2",children:a("select",{onChange:C,value:t.district||"",name:"district",id:"district",className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[r("option",{value:"",children:"أختر الحي"}),f.filter(e=>e.city_id===x).map(e=>r("option",{value:e.name,children:e.name},e.id))]})})]}),r("div",{className:"overflow-hidden sm:rounded-lg",children:a("div",{className:"p-6 text-gray-900",children:[a("div",{className:"container mx-auto grid grid-cols-1 sm:grid-cols-1  gap-4",children:[!i.data.length&&r("div",{children:r("h1",{className:"text-center sm:text-right text-lg sm:text-xl text-gray-900",children:"لا يوجد تطابق لبحثك، حاول مره اخرى!"})}),i.data.map(e=>e.library!==null?r(A,{book:e},e.id):r(E,{book:e},e.id))]}),r(P,{class:"mt-6",links:i.links})]})})]})})]})}export{Q as default};
